/**
 * @license
 * Copyright (c) 2020 The Nuevodebel Team. All rights reserved.
 * Code distributed by Google as part of the Nuevodebel Team project is also
 * Version 1.0
 */
!function(e,a){"function"==typeof define&&define.amd?define([],a.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=a(e,e.videojs):a(e,e.videojs)}(window,function(e,a){"use strict";e.videojs_dai={version:"0.2"};a.registerPlugin("dai",function(e){var i,t=this,d=t.$(".vjs-tech"),o=!1,n=(t.el(),new Array),r=!1;a.options.autoplay&&(r=!0),d.getAttribute("autoplay")&&(r=!0);var s=(a.mergeOptions||a.util.mergeOptions)({fallback:"",assetKey:"",source_id:"",video_id:"",liveApiKey:"",opaiKey:""},e||{});function l(){(i=i=new google.ima.dai.api.StreamManager(d)).addEventListener(google.ima.dai.api.StreamEvent.Type.LOADED,p,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,y,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,_,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,f,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,S,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,E,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,v,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,m,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,u,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,c,!1),i.addEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,g,!1)}function v(e){t.trigger("dai",{ad:n,type:"firstQuartile"})}function m(e){t.trigger("dai",{ad:n,type:"midpoint"})}function u(e){t.trigger("dai",{ad:n,type:"thirdQuartile"})}function c(e){t.trigger("dai",{ad:n,type:"complete"})}function g(e){t.trigger("dai",{ad:n,type:"adClick"})}function p(e){t.textTracks().on("addtrack",function(e){var a=e.track;"metadata"===a.kind&&a.on("cuechange",function(){let e=a.activeCues[0];if(e&&e.value.data){var t={};t[e.value.key]=e.value.data,t.duration=1/0,i.onTimedMetadata(t)}})}),t.src(e.getStreamData().url),r&&t.play()}function y(e){""!=s.fallback&&t.src(s.fallback)}function _(e){if(1!=o){var a=e.getStreamData().adProgressData,i=a.adPosition,d=a.totalAds,n=a.currentTime,r=a.duration,s=Math.floor(r-n),l=t.controlBar.el_.querySelector(".vjs-vast-label");l.innerHTML=1==d?"This Ad will end in "+s+"s":"Ad ("+i+" of "+d+") "+s+"s"}}function f(e){T(!0)}function S(e){n="undefined",T(!1)}function E(e){var a=e.getAd();(n=new Array).id=a.getAdId(),n.title=a.getTitle(),n.duration=a.getDuration(),n.url=a.g.g.u,t.trigger("dai",{ad:n,type:"started"})}function T(e){var i=t.controlBar.el_.querySelector(".vjs-vast-label");e?(a.dom.addClass(t.el_,"vjs-dai"),o&&(i.innerHTML="Ad Playing")):(a.dom.removeClass(t.el_,"vjs-dai"),t.adPlaying=!1)}return t.ready(function(){l(),""!=s.assetKey?function(){o=!0;var e=new google.ima.dai.api.LiveStreamRequest;e.assetKey=s.assetKey,e.apiKey=s.liveApiKey||"",i.requestStream(e)}():""!=s.source_id&&""!=s.video_id&&function(){o=!1;var e=new google.ima.dai.api.VODStreamRequest;e.contentSourceId=s.source_id,e.videoId=s.video_id,e.apiKey=s.apiKey||"",i.requestStream(e)}()}),t.dai.requestVODStream=function(e){o=!1,i.reset(),t.reset(),a.dom.removeClass(t.el_,"vjs-dai"),a.dom.removeClass(t.el_,"vjs-has-started"),a.dom.removeClass(t.el_,"vjs-playing"),a.dom.removeClass(t.bigPlayButton.el_,"vjs-no-pointer"),l();var d=new google.ima.dai.api.VODStreamRequest;d.contentSourceId=e.source_id,d.videoId=e.video_id,d.apiKey=e.apiKey||"",i.requestStream(d)},t.dai.requestLivetream=function(e){o=!0,i.reset(),t.reset(),a.dom.removeClass(t.el_,"vjs-dai"),a.dom.removeClass(t.el_,"vjs-has-started"),a.dom.removeClass(t.el_,"vjs-playing"),a.dom.removeClass(t.bigPlayButton.el_,"vjs-no-pointer");var d=new google.ima.dai.api.LiveStreamRequest;d.assetKey=e.assetKey,d.apiKey=e.apiKey||"",i.requestStream(d)},this})});var liveStream=!1,dai_vod=document.getElementById("dai_vod"),dai_live=document.getElementById("dai_live"),dai_vod2=document.getElementById("dai_vod2"),dai_live2=document.getElementById("dai_live2");document.querySelector("#vod").onclick=function(e){liveStream&&(liveStream=!1,player.dai.requestVODStream({source_id:"2528370",video_id:"tears-of-steel"}),dai_live&&(dai_live.className="nv-hidden"),dai_vod&&(dai_vod.className=""),dai_live2&&(dai_live2.className="nv-hidden"),dai_vod2&&(dai_vod2.className=""))},document.querySelector("#live").onclick=function(e){1!=liveStream&&(liveStream=!0,player.dai.requestLivetream({assetKey:"sN_IYUG8STe1ZzhIIE_ksA"}),dai_live&&(dai_live.className=""),dai_vod&&(dai_vod.className="nv-hidden"),dai_live2&&(dai_live2.className=""),dai_vod2&&(dai_vod2.className="nv-hidden"))};